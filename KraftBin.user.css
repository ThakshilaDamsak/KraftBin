/* ==UserStyle==
@name         KraftBin
@version      3.5.10
@namespace    ThakshilaDamsak
@description  Cleaner and familiar look for Kbin. Derived from Randdose's KoolBin 
@author       ThakshilaDamsak <thakshiladamsak@hotmail.com> (https://thakshiladamsak.github.io)
@homepageURL  https://github.com/ThakshilaDamsak/KraftBin
@supportURL   https://github.com/ThakshilaDamsak/KraftBin/issues/new
@license      GPL v3
@preprocessor stylus

@var checkbox customLayout "KraftBin Post Layout" 1

@var checkbox reduceMotion "Reduce Extra Motion" 0

@var text kraftbinBorderRadius "Corner Radius —— Turn off `Rounded Edges` option in Kbin to make this work" "8px"

@var select containerMarginTop "Top Margin" {
 "Enabled": "10px",
 "Disabled": "0",
  }

@var checkbox kraftBin-shadow "Extra Shadows" 1

@var checkbox alertToggle "Federated Warnings" 1

@var checkbox sidebarToggle "Sidebar" 1

@var select containerRatio-sidebar "Sidebar Size" {
 "Small": "350px",
 "Medium": "450px",
 "Large": "550px",
 "Custom": "var(--containerRatio-sidebar-custom, 650px)",
  }

@var text containerRatio-sidebar-custom "Custom Sidebar Size" "650px"

@var checkbox magazinesToggle "Random Magazines" 1

@var checkbox activeUsersToggle "Active Users" 1

@var checkbox randomPostsToggle "Random Posts" 1

@var checkbox randomThreadsToggle "Random Threads" 1

@var select kbinPromo-display "Kbin Promotion" {
 "Show": "flex",
 "Hide": "none",
  }

@var select scrolltopToggle "Scroll-to-top Button" {
 "Show": "100%",
 "Hide": "0%",
  }

@var select containerMaxwidth "Content Max Width —— For large screens" {
 "Default": "1200px",
 "Kbin Default": "1360px",
 "Reddit-like": "1000px",
 "Full Width": "auto",
 "Custom": "var(--containerMaxwidth-custom, none)",
  }

@var text containerMaxwidth-custom "Custom Max Width" "1500px"

@var select headerMaxwidth "Header Max Width —— For large screens" {
 "Full Width": "auto",
 "Same as Content": "containerMaxwidth",
 "Kbin Default": "1360px",
 "Custom": "var(--headerMaxwidth-custom, none)",
  }

@var text headerMaxwidth-custom "Header Custom Max Width" "1500px"

==/UserStyle== */
@-moz-document url-prefix("https://kbin.social"),
url-prefix("https://karab.in"),
url-prefix("https://fedia.io") {

	:root {
		--kraftbinBorderRadius: kraftbinBorderRadius;
		--containerMarginTop: containerMarginTop;
		--KraftBin-shadow: none;
		--KraftBin-hover-shadow: none;
		--alertToggle: block;
		--sidebarToggle: block;
		--containerRatio-sidebar: containerRatio-sidebar;
		--containerRatio-sidebar-custom: containerRatio-sidebar-custom;
		--magazinesToggle: block;
		--activeUsersToggle: block;
		--randomPostsToggle: block;
		--randomThreadsToggle: block;
		--kbinPromo-display: kbinPromo-display;
		--scrolltopToggle: scrolltopToggle;
		--containerMaxwidth: containerMaxwidth;
		--containerMaxwidth-custom: containerMaxwidth-custom;
		--headerMaxwidth: headerMaxwidth;
		--headerMaxwidth-custom: headerMaxwidth-custom;
	}

	if (kraftBin-shadow) {
		:root {
			--KraftBin-shadow: 0px 5px 25px rgba(0, 0, 0, .11);
			--KraftBin-hover-shadow: 0px 1px 25px rgba(0, 0, 0, .06);
			--KraftBin-image-shadow: 0 0 15px rgba(0, 0, 0, .17);
		}
	}

	if not (alertToggle) {
		:root {
			--alertToggle: none;
		}
	}
	if not (sidebarToggle) {
		:root {
			--sidebarToggle: none;
		}
	}
	if not (magazinesToggle) {
		:root {
			--magazinesToggle: none;
		}
	}
	if not (activeUsersToggle) {
		:root {
			--activeUsersToggle: none;
		}
	}
	if not (randomPostsToggle) {
		:root {
			--randomPostsToggle: none;
		}
	}
	if not (randomThreadsToggle) {
		:root {
			--randomThreadsToggle: none;
		}
	}

	/*Page*/
	html {
		scroll-behavior: smooth;
	}

	a,
	p {
		transition: 0.2s;
	}

	img {
		filter: drop-shadow(var(--KraftBin-image-shadow));
		transition: 0.2s;
		border-radius: var(--kraftbinBorderRadius);
	}

	code,
	div :not(.content) {
		border-radius: var(--kraftbinBorderRadius) !important;
	}

	.theme,
	.slider,
	.font-size,
	.radiogroup,
	.switch,
	.enum,
	.options,
	iframe {
		border-radius: var(--kraftbinBorderRadius) !important;
		box-shadow: var(--KraftBin-shadow) !important;
	}

	.slider::before {
		border-radius: var(--kraftbinBorderRadius) !important;
		left: .05em !important;
		width: 1.4em !important;
	}

	.dropdown button,
	.options__main,
	.options__top {
		border-radius: var(--kraftbinBorderRadius) !important;
	}

	.loader {
		border-radius: 50% !important;
	}

	aside.options {
		border-radius: var(--kraftbinBorderRadius) !important;
	}

	.kbin-promo img,
	.brand img {
		box-shadow: none !important;
		border-radius: 0 !important;
	}

	article figure {
		transition: 0.2s ease-in;
		box-shadow: var(--KraftBin-shadow);
	}

	article figure a {
		margin-bottom: -6px;
	}

	if not (reduceMotion) {
		article figure img:hover {
			scale: 1.015;
		}

		article figure:hover {
			box-shadow: var(--KraftBin-hover-shadow);
		}

		img.thumb-subject:hover {
			box-shadow: var(--KraftBin-hover-shadow) !important;
			scale: 1.015;
		}

		.preview img:hover {
			scale: 1.009;
		}

		a:hover {
			--KraftBin-shadow: var(--KraftBin-hover-shadow);
		}
	}



	#scroll-top {
		box-shadow: 0px 2px 10px 0px rgba(0, 0, 0, .26);
		border: solid;
		border-width: 1px;
		border-color: #6a6a6a8a;
		border-radius: var(--kraftbinBorderRadius) !important;
		transition: 0.2s;
	}

	#middle {
		top: 0px;
		margin-right: var(--marginsToggle);
		margin-left: var(--marginsToggle);
		transition: 0.2s;
	}

	@media screen and (max-width: 1200px) {
		#middle {
			margin-right: 0;
			margin-left: 0;
		}
	}

	@media screen and (max-width: 760px) {
		.entry footer {
			grid-area: body;
		}
	}

	@media screen and (max-width: 990px) {
		#sidebar {
			width: auto !important;
		}
	}

	footer {
		text-align: center;
	}


	#middle .kbin-container {
		grid-template-columns: 1fr 0fr;
		justify-content: center;
		padding-top: var(--containerMarginTop) !important;
		transition: 0.2s;
		max-width: var(--containerMaxwidth);
	}

	#header .kbin-container {
		max-width: var(--headerMaxwidth);
		transition: 0.2s;
	}

	.cover {
		border-radius: var(--kraftbinBorderRadius) var(--kraftbinBorderRadius) 0 0 !important;
	}

	.pagination a,
	.pagination span {
		border-radius: var(--kraftbinBorderRadius);
	}

	/*Headerbar*/
	#header {
		position: sticky;
		top: 0;
		backdrop-filter: blur(8px);
		transition: 0.2s;
	}

	/*LOL*/
	header#header.header a.active {
		background: transparent;
	}

	/*Drop down menus*/
	#header menu .dropdown__menu {
		left: unset;
		backdrop-filter: blur(20px) saturate(3) contrast(0.8);
		transition: 0.2s;
		box-shadow: 0px 5px 25px 0px rgba(0, 0, 0, .3);
	}

	menu {
		transition: 0.2s;
	}

	.dropdown__menu {
		box-shadow: 0px 5px 25px 0px rgba(0, 0, 0, .3);
		border-radius: var(--kraftbinBorderRadius) !important;
	}

	/*Optionbar*/
	.options--top {
		border-radius: var(--kraftbinBorderRadius) !important;
		box-shadow: var(--KraftBin-shadow) !important;
		transition: 0.2s;
	}

	.options {
		box-shadow: var(--KraftBin-shadow) !important;
		transition: 0.2s;
	}

	.section {
		box-shadow: var(--KraftBin-shadow) !important;
	}

	#sidebar {
		display: var(--sidebarToggle);
		width: var(--containerRatio-sidebar);
		transition: 0.2s;
	}

	.kbin-promo {
		box-shadow: none !important;
		display: var(--kbinPromo-display) !important;
		flex-direction: row !important;
	}

	.section--no-bg {
		box-shadow: none !important;
	}

	.related-magazines {
		display: var(--magazinesToggle);
	}

	.active-users {
		display: var(--activeUsersToggle);
	}

	.posts {
		display: var(--randomPostsToggle);
	}

	.entries {
		display: var(--randomThreadsToggle);
	}

	.user-name {
		margin: auto;
		margin-top: 15px;
		font-weight: 500;
	}
	.popover {
		transition: 0.2s;
	}

	.alert__info {
		display: var(--alertToggle);
	}

	#scroll-top {
		scale: var(--scrolltopToggle);
	}

	article {
		padding: 0px !important;
	}
}

@-moz-document url-prefix("https://kbin.social"),
url-prefix("https://karab.in"),
url-prefix("https://fedia.io") {

	if(customLayout) {
		/*Posts*/
		.entry {
			grid-template-areas: "vote title title" "vote image image" "vote image image" "vote desc desc  " "vote meta footer" "vote body  body ";
			padding: 5px;
			border-radius: var(--kraftbinBorderRadius) !important;
			box-shadow: var(--KraftBin-shadow) !important;
			transition: 0.2s;
		}

		.no-image-placeholder {
			display: none;
		}

		/*Post image wrapper*/
		.entry figure {
			display: flex;
			justify-content: center;
			width: unset;
			height: unset;
			position: unset;
			margin: unset;
		}

		/*Post Image*/
		.entry .no-image-placeholder img,
		.entry figure img {
			max-height: 400px;
			object-fit: unset;
			position: unset;
			height: unset;
			border-radius: var(--kraftbinBorderRadius) !important;
		}

		.entry .no-image-placeholder,
		.entry figure {
			justify-self: center;
			border-radius: var(--kraftbinBorderRadius) !important;
			margin: 10px;
		}

		.entry .no-image-placeholder .image-filler,
		.entry figure .image-filler {
			width: unset;
			height: unset;
			background-position: unset;
			top: unset;
			left: unset;
			right: unset;
		}

		/*Placeholder for posts with no image*/
		.entry .no-image-placeholder {
			width: 200px;
			height: 200px;
		}

		/*User and magazine info*/
		.entry .meta {
			width: max-content;
			align-self: unset;
			margin: 10px;
			margin-left: 10px;
			grid-area: footer;
		}

		/*Short description*/
		.entry .short-desc {
			grid-area: desc;
		}

		/*Contains options like: comments, boost, report, etc*/
		.entry footer {
			margin: auto;
			margin-right: 20px;
			transition: 0.2s;
		}

		.preview img {
			transition: 0.2s ease;
		}

		.kch_header {
			border-radius: var(--kraftbinBorderRadius) var(--kraftbinBorderRadius) 0 0 !important;
		}

		.language-vbnet {
			border-radius: 0 0 var(--kraftbinBorderRadius) var(--kraftbinBorderRadius) !important;
		}

		aside.vote {
			border-radius: var(--kraftbinBorderRadius) 0 0 var(--kraftbinBorderRadius) !important;
		}
	}

	/*Posts*/
	.entry {
		border-radius: var(--kraftbinBorderRadius) !important;
		box-shadow: var(--KraftBin-shadow) !important;
		transition: 0.2s;
	}

	.entry:hover {
		box-shadow: var(--KraftBin-hover-shadow) !important;
		transition: 0.1s !important;
	}


	/*Post Image*/
	.entry .no-image-placeholder img,
	.entry figure img {
		border-radius: var(--kraftbinBorderRadius);
	}

	.entry .no-image-placeholder,
	.entry figure {
		border-radius: var(--kraftbinBorderRadius) !important;
	}

	div.preview {
		transition: 0.2s;
		overflow: hidden !important;
		border-radius: var(--kraftbinBorderRadius) !important;
		margin-bottom: 5px;
	}

	.preview:hover {
		box-shadow: var(--KraftBin-hover-shadow) !important;
	}

	.preview img {
		transition: 0.2s;
		margin-bottom: -7px;
		box-shadow: none !important;
	}

	.kch_header {
		border-radius: var(--kraftbinBorderRadius) var(--kraftbinBorderRadius) 0 0 !important;
	}

	.language-vbnet {
		border-radius: 0 0 var(--kraftbinBorderRadius) var(--kraftbinBorderRadius) !important;
	}
}

@-moz-document url-prefix("https://kbin.social"),
url-prefix("https://karab.in"),
url-prefix("https://fedia.io") {
	/*Vote*/
	/*Vote wrapper*/
	.vote {
		gap: 0;
		transition: 0.2s;
	}

	aside.vote {
		gap: 5px !important;
		padding: 10px;
		background: #81818114;
		margin: 0px !important;
		border: 1px;
		border-radius: var(--kraftbinBorderRadius);
	}

	/*Vote buttons*/
	.vote button {
		border: 1px;
		transition: 0.2s;
		box-shadow: 0px 2px 5px 0px rgba(0, 0, 0, .05);
		background: var(--kbin-body-bg);
		border-width: 1px;
		border-color: #89898921;
		border-style: solid;
	}

	.post .vote,
	.comment .vote {
		background: #00800000;
		padding: 0px !important;
	}

	.comment .vote button,
	.post .vote button {
		background: var(--kbin-bg-nth);
		margin-top: 5px;
		height: 25px;
		box-shadow: 0px 2px 5px 0px rgba(0, 0, 0, .05);
	}


	/*Upvote*/
	.vote .vote__up button {
		border-radius: var(--kraftbinBorderRadius);
	}

	/*	.vote .active.vote__up button {

	} */
	/*Downvote*/
	.vote .vote__down button {
		border-radius: var(--kraftbinBorderRadius);
	}

	/*	.vote .active.vote__down button {

	} */
}

@-moz-document url-prefix("https://kbin.social"),
url-prefix("https://karab.in"),
url-prefix("https://fedia.io") {
	/*Magazine*/
	#sidebar .section figure img {
		aspect-ratio: auto;
	}

	.btn[title="block_magazine"],
	aside.user__follow > form[name*="block"] .btn {
		border-radius: 0 var(--kraftbinBorderRadius) var(--kraftbinBorderRadius) 0 !important;
	}

	.magazine__subscribe div,
	.user__follow div {
		border-radius: var(--kraftbinBorderRadius) 0 0 var(--kraftbinBorderRadius) !important;
	}

	aside.magazine__subscribe > form[name*="subscribe"] .btn,
	aside.user__follow > form[name*="follow"] .btn {
		border-radius: 0 !important;
	}
}

@-moz-document url-prefix("https://kbin.social"),
url-prefix("https://karab.in"),
url-prefix("https://fedia.io") {
	/*Components*/
	.section,
	.btn,
	select,
	textarea,
	input,
	table {
		border-radius: var(--kraftbinBorderRadius) !important;
	}

	.btn {
		cursor: pointer;
		transition: 0.2s;
	}
}

@-moz-document url-prefix("https://kbin.social/search"),
url-prefix("https://kbin.social/magazines"),
url-prefix("https://karab.in/search"),
url-prefix("https://karab.in/magazines"),
url-prefix("https://fedia.io/search"),
url-prefix("https://fedia.io/magazines") {
	/*Search page*/
	.flex {
		gap: 0;
		justify-content: space-evenly;
		transition: 0.2s;
	}

	form[method="get"] input {
		border-radius: var(--kraftbinBorderRadius) 0 0 var(--kraftbinBorderRadius) !important;
		outline: none !important;
		transition: 0.2s;
	}

	form[method="get"] input:focus {
		border: var(--kbin-button-primary-hover-bg) solid 1px;
		transition: 0.2s;
	}

	form[method="get"] input:focus + .btn {
		border: var(--kbin-button-primary-hover-bg) solid 1px;
		border-left: none;
		transition: 0.2s;
	}

	form[method="get"] .btn {
		border-radius: 0 var(--kraftbinBorderRadius) var(--kraftbinBorderRadius) 0 !important;
		transition: 0.2s;
		height: 51px;
		aspect-ratio: 1;
		padding: 0;
	}
}
